{% extends "admin/base_admin.html" %}

{% block title %}Store Settings{% endblock %}

{% block content %}
<div class="container-fluid p-4">
    <div class="row">
        <div class="col-12">
            <h1 class="mb-4">Store Settings</h1>

            {% if status_message %}
            <div class="alert alert-{{ status_type }}" role="alert">
                {{ status_message }}
            </div>
            {% endif %}

            <div class="card mb-4">
                <div class="card-header">
                    <h5>Store Information</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <form action="/admin/store-settings/update" method="POST">
                                <div class="mb-3">
                                    <label for="store_name" class="form-label">Store Name</label>
                                    <input type="text" class="form-control" id="store_name" name="store_name" value="{{ tenant.name }}" required>
                                </div>
                                <div class="mb-3">
                                    <label for="store_description" class="form-label">Store Description</label>
                                    <textarea class="form-control" id="store_description" name="store_description" rows="3">{{ tenant.description }}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="store_url" class="form-label">Store URL</label>
                                    <div class="input-group">
                                        <span class="input-group-text">/store/</span>
                                        <input type="text" class="form-control" id="store_slug" name="store_slug" value="{{ tenant.slug }}" required pattern="[a-z0-9-]+" title="Only lowercase letters, numbers, and hyphens are allowed">
                                    </div>
                                    <small class="form-text text-muted">Only lowercase letters, numbers, and hyphens are allowed.</small>
                                </div>
                                <div class="mb-3">
                                    <label for="store_email" class="form-label">Contact Email</label>
                                    <input type="email" class="form-control" id="store_email" name="store_email" value="{{ tenant.contact_email }}">
                                </div>
                                <div class="mb-3">
                                    <label for="store_phone" class="form-label">Contact Phone</label>
                                    <input type="tel" class="form-control" id="store_phone" name="store_phone" value="{{ tenant.contact_phone }}">
                                </div>
                                <div class="mb-3">
                                    <label for="store_address" class="form-label">Store Address</label>
                                    <textarea class="form-control" id="store_address" name="store_address" rows="3">{{ tenant.address }}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="store_currency" class="form-label">Default Currency</label>
                                    <select class="form-select" id="store_currency" name="store_currency">
                                        <option value="USD" {% if tenant.currency == 'USD' %}selected{% endif %}>US Dollar (USD)</option>
                                        <option value="EUR" {% if tenant.currency == 'EUR' %}selected{% endif %}>Euro (EUR)</option>
                                        <option value="GBP" {% if tenant.currency == 'GBP' %}selected{% endif %}>British Pound (GBP)</option>
                                        <option value="CAD" {% if tenant.currency == 'CAD' %}selected{% endif %}>Canadian Dollar (CAD)</option>
                                        <option value="AUD" {% if tenant.currency == 'AUD' %}selected{% endif %}>Australian Dollar (AUD)</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="tax_rate" class="form-label">Tax Rate (%)</label>
                                    <input type="number" class="form-control" id="tax_rate" name="tax_rate" value="{{ tenant.tax_rate|default(0) }}" min="0" max="100" step="0.01">
                                </div>
                                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-save"></i> Save Changes
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h5>Store Theme</h5>
                </div>
                <div class="card-body">
                    <p>Customize the look and feel of your store.</p>
                    <a href="/admin/theme-settings" class="btn btn-outline-primary">
                        <i class="bi bi-palette"></i> Theme Settings
                    </a>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h5>Additional Settings</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3 form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="enable_guest_checkout" {% if tenant.settings.enable_guest_checkout %}checked{% endif %}>
                        <label class="form-check-label" for="enable_guest_checkout">Enable Guest Checkout</label>
                    </div>
                    <div class="mb-3 form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="show_stock_levels" {% if tenant.settings.show_stock_levels %}checked{% endif %}>
                        <label class="form-check-label" for="show_stock_levels">Show Product Stock Levels</label>
                    </div>
                    <div class="mb-3 form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="enable_reviews" {% if tenant.settings.enable_reviews %}checked{% endif %}>
                        <label class="form-check-label" for="enable_reviews">Enable Product Reviews</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}