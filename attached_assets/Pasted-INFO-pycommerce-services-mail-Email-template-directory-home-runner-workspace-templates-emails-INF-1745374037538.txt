INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:asgi_wsgi_app:No existing uvicorn processes found
INFO:asgi_wsgi_app:Starting uvicorn server with command: /nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/bin/python3 -m uvicorn web_app:app --host 127.0.0.1 --port 8001 --reload --no-use-colors
INFO:asgi_wsgi_app:Waiting for uvicorn server to start...
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 1/10)
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:     Will watch for changes in these directories: ['/home/runner/workspace']
INFO:asgi_wsgi_app:Uvicorn: INFO:     Uvicorn running on http://127.0.0.1:8001 (Press CTRL+C to quit)
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started reloader process [368] using WatchFiles
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 2/10)
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 3/10)
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 4/10)
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 5/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 6/10)
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:Found Flask app in module app
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 7/10)
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: WARNING:root:AI configuration module not available
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 8/10)
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 9/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [367]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8006 (Press CTRL+C to quit)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 10/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Initializing managers for categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Manager initialization complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: /home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
INFO:asgi_wsgi_app:Uvicorn: Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Simplified plugins routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Templates setup complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Page Builder routes initialized successfully with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Starting FastAPI server...
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
ERROR:asgi_wsgi_app:Failed to start uvicorn server
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:root:Starting application with all routes registered
INFO:__main__:All page builder tables already exist
INFO:__main__:All page builder tables exist and are ready to use
INFO:__main__:Creating default page templates...
INFO:create_default_templates:Found 5 existing templates - skipping creation
INFO:__main__:Starting server on port 8000
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
ERROR:__main__:Error initializing plugins: register_plugin() missing 2 required positional arguments: 'name' and 'plugin_class'
INFO:     Will watch for changes in these directories: ['/home/runner/workspace']
INFO:     Uvicorn running on http://0.0.0.0:8003 (Press CTRL+C to quit)
INFO:     Started reloader process [252] using WatchFiles
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Admin routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Stripe checkout routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Storefront routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Store settings test routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API documentation setup successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started server process [371]
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application startup.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application startup complete.
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:Found Flask app in module app
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: WARNING:root:AI configuration module not available
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [380]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Initializing managers for categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Manager initialization complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: /home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
INFO:asgi_wsgi_app:Uvicorn: Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Simplified plugins routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Templates setup complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Page Builder routes initialized successfully with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Starting FastAPI server...
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Admin routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Stripe checkout routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Storefront routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Store settings test routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API documentation setup successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started server process [386]
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application startup.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application startup complete.
INFO:asgi_wsgi_app:Uvicorn: ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application shutdown.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application shutdown complete.
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:52848 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8001/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn server is already running and responsive
INFO:__mp_main__:Creating default page templates...
INFO:create_default_templates:Found 5 existing templates - skipping creation
INFO:__mp_main__:Starting server on port 8000
INFO:     Started server process [388]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:watchfiles.main:3 changes detected
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:Found Flask app in module app
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:watchfiles.main:1 change detected
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: WARNING:root:AI configuration module not available
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:watchfiles.main:1 change detected
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:watchfiles.main:3 changes detected
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:watchfiles.main:1 change detected
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:watchfiles.main:1 change detected
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [392]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Initializing managers for categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Manager initialization complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: /home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
INFO:asgi_wsgi_app:Uvicorn: Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:watchfiles.main:8 changes detected
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Simplified plugins routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Templates setup complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Page Builder routes initialized successfully with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Starting FastAPI server...
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Admin routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Stripe checkout routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Storefront routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Store settings test routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API documentation setup successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started server process [398]
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application startup.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application startup complete.
INFO:asgi_wsgi_app:Uvicorn: ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application shutdown.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application shutdown complete.
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [400]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:watchfiles.main:2 changes detected
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:watchfiles.main:2 changes detected
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:Found Flask app in module app
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: WARNING:root:AI configuration module not available
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [409]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Initializing managers for categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Manager initialization complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: /home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
INFO:asgi_wsgi_app:Uvicorn: Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Simplified plugins routes registered successfully
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Templates setup complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Page Builder routes initialized successfully with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Starting FastAPI server...
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Admin routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Stripe checkout routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Storefront routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Store settings test routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API documentation setup successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started server process [516]
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application startup.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application startup complete.
INFO:asgi_wsgi_app:Uvicorn: ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application shutdown.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application shutdown complete.
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [518]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:Found Flask app in module app
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: WARNING:root:AI configuration module not available
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [564]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Initializing managers for categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Manager initialization complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: /home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
INFO:asgi_wsgi_app:Uvicorn: Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Simplified plugins routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Templates setup complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Page Builder routes initialized successfully with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Starting FastAPI server...
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Admin routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Stripe checkout routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Storefront routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Store settings test routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API documentation setup successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started server process [578]
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application startup.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application startup complete.
INFO:asgi_wsgi_app:Uvicorn: ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application shutdown.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application shutdown complete.
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [580]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:Found Flask app in module app
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: WARNING:root:AI configuration module not available
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [596]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Initializing managers for categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Manager initialization complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: /home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
INFO:asgi_wsgi_app:Uvicorn: Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Simplified plugins routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Templates setup complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Page Builder routes initialized successfully with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Starting FastAPI server...
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Admin routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Stripe checkout routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Storefront routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Store settings test routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API documentation setup successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started server process [602]
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application startup.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application startup complete.
INFO:asgi_wsgi_app:Uvicorn: ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application shutdown.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application shutdown complete.
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [604]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:Found Flask app in module app
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: WARNING:root:AI configuration module not available
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [614]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Initializing managers for categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Manager initialization complete
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: /home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
INFO:asgi_wsgi_app:Uvicorn: Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Simplified plugins routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Templates setup complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Page Builder routes initialized successfully with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Starting FastAPI server...
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Admin routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Stripe checkout routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Storefront routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Store settings test routes registered successfully
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API documentation setup successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:API routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started server process [620]
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application startup.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application startup complete.
INFO:asgi_wsgi_app:Uvicorn: ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application shutdown.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application shutdown complete.
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [622]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:Found Flask app in module app
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
INFO:asgi_wsgi_app:Uvicorn: WARNING:root:AI configuration module not available
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:routes.admin.estimates_setup:Estimate routes registered successfully
INFO:web_app:Admin routes registered successfully
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.stripe_checkout:Stripe checkout routes registered successfully with FastAPI
INFO:web_app:Stripe checkout routes registered successfully
INFO:routes.storefront.integrated_stripe_demo:Stripe module imported successfully. API key is present
INFO:web_app:Integrated Stripe demo routes registered successfully
INFO:web_app:Storefront routes registered successfully
INFO:web_app:Store settings test routes registered successfully
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:pycommerce.api.docs:Setting up API documentation routes
INFO:pycommerce.api.docs:API documentation routes set up successfully
INFO:web_app:API documentation setup successfully
INFO:web_app:API routes registered successfully
INFO:     Started server process [632]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 98] error while attempting to bind on address ('127.0.0.1', 8006): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.plugins.ai.providers:Registered AI provider: openai
INFO:pycommerce.plugins.ai:Successfully initialized AI provider: openai
WARNING:root:AI configuration module not available
INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Initializing managers for categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.category:CategoryManager initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.categories:Manager initialization complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.home:Home routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: /home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
INFO:asgi_wsgi_app:Uvicorn: Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Simplified plugins routes registered successfully
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Templates setup complete
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:asgi_wsgi_app:Uvicorn: INFO:web_app:Page Builder routes initialized successfully with templates
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Starting FastAPI server...
INFO:asgi_wsgi_app:Uvicorn: INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for Stripe
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.plugins.payment.config:Falling back to legacy settings service for PayPal
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.services.market_analysis:Flask ProductManager initialized for fallback product lookups
INFO:pycommerce.services.market_analysis:Market analysis service initialized
INFO:     Shutting down
INFO:routes.admin.categories:Initializing managers for categories routes
INFO:pycommerce.models.category:CategoryManager initialized
INFO:routes.admin.categories:Successfully initialized CategoryManager for admin categories routes
INFO:routes.admin.categories:Manager initialization complete
INFO:routes.storefront.home:Home routes registered successfully
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
/home/runner/workspace/pycommerce/models/page_builder.py:110: SAWarning: User-placed attribute InventoryRecord.transactions on Mapper[InventoryRecord(inventory_records)] is replacing an existing class-bound attribute of the same name.  Behavior is not fully defined in this case.  This use is deprecated and will raise an error in a future release (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
  Tenant.pages = relationship("Page", back_populates="tenant", cascade="all, delete-orphan")
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [388]
INFO:     Stopping reloader process [252]
INFO:pycommerce.services.ai_service:OpenAI client initialized successfully
INFO:web_app:Simplified plugins routes registered successfully
INFO:routes.admin.page_builder:Setting up page builder routes with templates
INFO:routes.admin.page_builder:Templates setup complete
INFO:routes.admin.page_builder:Base directory: /home/runner/workspace
INFO:routes.admin.page_builder:Template directory: /home/runner/workspace/templates
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/list.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/create.html
INFO:routes.admin.page_builder:Template found: /home/runner/workspace/templates/admin/pages/editor.html
INFO:web_app:Page Builder routes initialized successfully with templates
INFO:flask_adapter:Starting FastAPI server...
INFO:flask_adapter:Started FastAPI server on port 8006
INFO:pycommerce.models.category:Found Flask app in module app
INFO:pycommerce.models.category:CategoryManager initialized
INFO:pycommerce.plugins.ai:AI configuration initialized with provider: openai
INFO:pycommerce.plugins.ai.providers:Registered AI provider: mock