[2025-04-08 12:49:32 +0000] [8204] [INFO] Starting gunicorn 23.0.0
[2025-04-08 12:49:32 +0000] [8204] [INFO] Listening at: http://0.0.0.0:5000 (8204)
[2025-04-08 12:49:32 +0000] [8204] [INFO] Using worker: sync
[2025-04-08 12:49:32 +0000] [8216] [INFO] Booting worker with pid: 8216
[2025-04-08 12:49:33 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:34 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:34 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:34 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:34 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:34 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:34 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:34 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
INFO:pycommerce.plugins.payment.config:Using development Stripe credentials
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
INFO:pycommerce.core.db:Initializing database...
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
[2025-04-08 12:49:35 +0000] [8204] [INFO] Handling signal: winch
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Starting uvicorn server with command: /nix/store/wqhkxzzlaswkj3gimqign99sshvllcg6-python-wrapped-0.1.0/bin/python3 -m uvicorn web_app:app --host 127.0.0.1 --port 8000 --reload --no-use-colors
INFO:asgi_wsgi_app:Waiting for uvicorn server to start...
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 1/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:     Will watch for changes in these directories: ['/home/runner/workspace']
INFO:asgi_wsgi_app:Uvicorn: INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started reloader process [8247] using WatchFiles
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 2/10)
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 3/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development Stripe credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 4/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 5/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started server process [8258]
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application startup.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application startup complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:37438 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn server is running
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:37444 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:37460 - "GET / HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/ "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:37474 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.tenant:Retrieved tenant by slug demo1 with theme settings: {'primary_color': '#ff0000', 'secondary_color': '#6c757d', 'background_color': '#ffffff', 'text_color': '#212529', 'font_family': 'Arial, sans-serif', 'heading_font_family': 'inherit', 'base_font_size': 16, 'heading_scale': 'moderate', 'container_width': 'standard', 'border_radius': 4, 'spacing_scale': 'moderate', 'header_style': 'standard', 'product_card_style': 'standard', 'button_style': 'standard', 'custom_css': '', 'updated_at': '2025-04-05T14:12:30.907742'}
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.product:Querying database for products of tenant: 0a38d2a1-00fe-47ea-a6d2-f1595048aab0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.product:Found 0 products for tenant 0a38d2a1-00fe-47ea-a6d2-f1595048aab0 in database
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:37488 - "GET /admin/dashboard HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/dashboard "HTTP/1.1 200 OK"
[2025-04-08 12:49:56 +0000] [8204] [INFO] Handling signal: winch
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:47890 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.tenant:Retrieved tenant by slug tech with theme settings: {}
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.product:Querying database for products of tenant: ea6c4bc0-d5aa-4d4f-862c-5d47e7c3f410
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.product:Found 6 products for tenant ea6c4bc0-d5aa-4d4f-862c-5d47e7c3f410 in database
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:47892 - "GET /admin/dashboard HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/dashboard "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:59420 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.tenant:Retrieved tenant by slug tech with theme settings: {}
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 757e7849-7b0f-4059-923b-2202414a93be: Parent instance <Order at 0x7fb1be451390> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order a2578c46-7302-4bd7-bf3d-44745a2fbfa6: Parent instance <Order at 0x7fb1be450950> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order b5eb3dc2-63a1-418e-b8b2-6fb46257b9ce: Parent instance <Order at 0x7fb1be48d910> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order fdd73fa4-bd96-43b2-8aad-537688aa0379: Parent instance <Order at 0x7fb1be4adf90> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order f7f401a0-5395-4e9c-9ce1-e3dcb77c8455: Parent instance <Order at 0x7fb1be4af510> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 7ff69d9a-ed09-408d-a26d-ce96f9bc4fe8: Parent instance <Order at 0x7fb1be4a5610> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order fd24d4cc-5e72-4339-b498-938e28af77b9: Parent instance <Order at 0x7fb1be4a54d0> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 288531dc-dd6b-4a1e-b3a3-d8e3319e40f6: Parent instance <Order at 0x7fb1be4a4b90> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order c5a04de9-5f21-4d91-af3a-79d1a37c60db: Parent instance <Order at 0x7fb1be4a4750> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order aa6dbcf6-4425-42d4-95f1-691ed2ba0c83: Parent instance <Order at 0x7fb1be4a4890> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 6f674710-9541-4245-b06d-f2894df80ad6: Parent instance <Order at 0x7fb1be4a5c50> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 55a82dda-5870-4cb7-b15d-db03d1f28417: Parent instance <Order at 0x7fb1be4a5bd0> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:59436 - "GET /admin/orders HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/orders "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:48340 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.tenant:Retrieved tenant by slug tech with theme settings: {}
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not access order items: Parent instance <Order at 0x7fb1be4a6cd0> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: ERROR:routes.admin.orders:Error getting order details: 'builtin_function_or_method' object is not iterable
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:48342 - "GET /admin/orders/757e7849-7b0f-4059-923b-2202414a93be HTTP/1.1" 303 See Other
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/orders/757e7849-7b0f-4059-923b-2202414a93be "HTTP/1.1 303 See Other"
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.tenant:Retrieved tenant by slug tech with theme settings: {}
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 757e7849-7b0f-4059-923b-2202414a93be: Parent instance <Order at 0x7fb1be4b6d90> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order a2578c46-7302-4bd7-bf3d-44745a2fbfa6: Parent instance <Order at 0x7fb1be4b7bd0> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order b5eb3dc2-63a1-418e-b8b2-6fb46257b9ce: Parent instance <Order at 0x7fb1be4b5010> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order fdd73fa4-bd96-43b2-8aad-537688aa0379: Parent instance <Order at 0x7fb1be4df210> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order f7f401a0-5395-4e9c-9ce1-e3dcb77c8455: Parent instance <Order at 0x7fb1be4dd310> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 7ff69d9a-ed09-408d-a26d-ce96f9bc4fe8: Parent instance <Order at 0x7fb1be49b990> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order fd24d4cc-5e72-4339-b498-938e28af77b9: Parent instance <Order at 0x7fb1be498350> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 288531dc-dd6b-4a1e-b3a3-d8e3319e40f6: Parent instance <Order at 0x7fb1be498d10> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order c5a04de9-5f21-4d91-af3a-79d1a37c60db: Parent instance <Order at 0x7fb1be49a910> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order aa6dbcf6-4425-42d4-95f1-691ed2ba0c83: Parent instance <Order at 0x7fb1be4dfcd0> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 6f674710-9541-4245-b06d-f2894df80ad6: Parent instance <Order at 0x7fb1be49ba50> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: WARNING:routes.admin.orders:Could not get items count for order 55a82dda-5870-4cb7-b15d-db03d1f28417: Parent instance <Order at 0x7fb1be498c90> is not bound to a Session; lazy load operation of attribute 'items' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:48342 - "GET /admin/orders?status_message=Error+loading+order:+'builtin_function_or_method'%20object%20is%20not%20iterable&status_type=error HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/orders?status_message=Error+loading+order:+'builtin_function_or_method'%20object%20is%20not%20iterable&status_type=error "HTTP/1.1 200 OK"