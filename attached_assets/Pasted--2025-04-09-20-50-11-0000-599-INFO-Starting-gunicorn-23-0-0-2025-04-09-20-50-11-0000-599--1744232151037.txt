[2025-04-09 20:50:11 +0000] [599] [INFO] Starting gunicorn 23.0.0
[2025-04-09 20:50:11 +0000] [599] [INFO] Listening at: http://0.0.0.0:5000 (599)
[2025-04-09 20:50:11 +0000] [599] [INFO] Using worker: sync
[2025-04-09 20:50:11 +0000] [610] [INFO] Booting worker with pid: 610
[2025-04-09 20:50:11 +0000] [599] [INFO] Handling signal: winch
[2025-04-09 20:50:11 +0000] [599] [INFO] Handling signal: winch
[2025-04-09 20:50:11 +0000] [599] [INFO] Handling signal: winch
[2025-04-09 20:50:11 +0000] [599] [INFO] Handling signal: winch
[2025-04-09 20:50:11 +0000] [599] [INFO] Handling signal: winch
[2025-04-09 20:50:11 +0000] [599] [INFO] Handling signal: winch
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development Stripe credentials
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Starting uvicorn server with command: /nix/store/wqhkxzzlaswkj3gimqign99sshvllcg6-python-wrapped-0.1.0/bin/python3 -m uvicorn web_app:app --host 127.0.0.1 --port 8000 --reload --no-use-colors
INFO:asgi_wsgi_app:Waiting for uvicorn server to start...
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 1/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:     Will watch for changes in these directories: ['/home/runner/workspace']
INFO:asgi_wsgi_app:Uvicorn: INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started reloader process [626] using WatchFiles
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 2/10)
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 3/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development Stripe credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: stripe
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered payment plugin: paypal
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce:Registered shipping plugin: standard
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Waiting for uvicorn server (attempt 4/10)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Initializing database...
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.core.db:Database initialized successfully.
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.migrations:Database migrations initialized
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.stores:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.cart:Finished loading managers
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Uvicorn: INFO:     Started server process [633]
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application startup.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application startup complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:57344 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn server is running
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:57358 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:57370 - "GET / HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/ "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:57372 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:57374 - "GET / HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/ "HTTP/1.1 200 OK"
[2025-04-09 20:50:20 +0000] [599] [INFO] Handling signal: winch
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:57890 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.tenant:Retrieved tenant by slug tech with theme settings: {}
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.product:Querying database for products of tenant: ea6c4bc0-d5aa-4d4f-862c-5d47e7c3f410
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.product:Found 6 products for tenant ea6c4bc0-d5aa-4d4f-862c-5d47e7c3f410 in database
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:57904 - "GET /admin/dashboard HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/dashboard "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:57918 - "GET /api/health HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.tenant:Retrieved tenant by slug tech with theme settings: {}
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Fetching products for tenant: Tech Gadgets (ID: ea6c4bc0-d5aa-4d4f-862c-5d47e7c3f410)
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.product:Querying database for products of tenant: ea6c4bc0-d5aa-4d4f-862c-5d47e7c3f410
INFO:asgi_wsgi_app:Uvicorn: INFO:pycommerce.models.product:Found 6 products for tenant ea6c4bc0-d5aa-4d4f-862c-5d47e7c3f410 in database
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Found 6 products for tenant Tech Gadgets
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Product 1: ID=63d63aca-5b6b-4672-a72b-b1483f036ef6, Name=Premium Laptop, Price=1299.99
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Product 2: ID=abd3687d-0cf7-481d-a7b0-e4302160a6eb, Name=Wireless Headphones, Price=199.99
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Product 3: ID=561e087e-9fba-4b51-8768-d8fb0a0a00a4, Name=Smartphone Pro, Price=899.99
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Product 4: ID=b03b63cc-6c45-45cd-a7d8-8b5cc844f144, Name=Smart Watch, Price=249.99
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Product 5: ID=8285a63d-9589-4928-9eba-373834fa4014, Name=Wireless Earbuds, Price=149.99
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Product 6: ID=94f6ec67-45c0-4a69-970f-5a12f3174922, Name=Ultrabook Pro, Price=1299.99
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Added product to template: Premium Laptop with tenant_name=Tech Gadgets
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Added product to template: Wireless Headphones with tenant_name=Tech Gadgets
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Added product to template: Smartphone Pro with tenant_name=Tech Gadgets
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Added product to template: Smart Watch with tenant_name=Tech Gadgets
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Added product to template: Wireless Earbuds with tenant_name=Tech Gadgets
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Added product to template: Ultrabook Pro with tenant_name=Tech Gadgets
INFO:asgi_wsgi_app:Uvicorn: INFO:routes.admin.products:Total products for template: 6
INFO:asgi_wsgi_app:Uvicorn: INFO:     127.0.0.1:57930 - "GET /admin/products HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/products "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn: WARNING:  WatchFiles detected changes in 'routes/admin/products.py'. Reloading...
INFO:asgi_wsgi_app:Uvicorn: INFO:     Shutting down
INFO:asgi_wsgi_app:Uvicorn: INFO:     Waiting for application shutdown.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Application shutdown complete.
INFO:asgi_wsgi_app:Uvicorn: INFO:     Finished server process [633]
[2025-04-09 20:54:25 +0000] [610] [INFO] Worker reloading: /home/runner/workspace/routes/admin/products.py modified
[2025-04-09 20:54:25 +0000] [610] [INFO] Worker exiting (pid: 610)
[2025-04-09 20:54:25 +0000] [1044] [INFO] Booting worker with pid: 1044
INFO:pycommerce.services.mail:Email template directory: /home/runner/workspace/templates/emails
INFO:pycommerce.plugins.payment.config:Successfully loaded payment settings from database
INFO:pycommerce.plugins.payment.config:Using development Stripe credentials
INFO:pycommerce.plugins.payment.config:Using development PayPal credentials
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce.plugins:Registering plugin: stripe_payment v0.1.0
INFO:pycommerce.plugins.payment.stripe:Initializing Stripe payment plugin
INFO:pycommerce:Registered payment plugin: stripe
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce.plugins:Registering plugin: paypal_payment v0.1.0
INFO:pycommerce.plugins.payment.paypal:Initializing PayPal payment plugin
INFO:pycommerce:Registered payment plugin: paypal
INFO:pycommerce.plugins:Registering plugin: standard_shipping v0.1.0
INFO:pycommerce.plugins.shipping.standard:Initializing Standard shipping plugin
INFO:pycommerce:Registered shipping plugin: standard
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.core.db:Initializing database...
INFO:pycommerce.core.db:Database initialized successfully.
INFO:pycommerce.migrations:Database migrations initialized
INFO:routes.storefront.stores:Initialized SDK TenantManager
INFO:routes.storefront.stores:Initialized SDK ProductManager
INFO:routes.storefront.stores:Initialized SDK CartManager
INFO:routes.storefront.stores:Finished loading managers
INFO:routes.storefront.cart:Initialized SDK ProductManager
INFO:routes.storefront.cart:Initialized SDK CartManager
INFO:routes.storefront.cart:Initialized SDK TenantManager
INFO:routes.storefront.cart:Finished loading managers
INFO:routes.storefront.checkout:Initialized SDK TenantManager
INFO:routes.storefront.checkout:Initialized SDK ProductManager
INFO:routes.storefront.checkout:Initialized SDK CartManager
INFO:routes.storefront.checkout:Initialized SDK OrderManager
INFO:routes.storefront.checkout:Finished loading Flask app managers
INFO:asgi_wsgi_app:Starting uvicorn server with command: /nix/store/wqhkxzzlaswkj3gimqign99sshvllcg6-python-wrapped-0.1.0/bin/python3 -m uvicorn web_app:app --host 127.0.0.1 --port 8000 --reload --no-use-colors
INFO:asgi_wsgi_app:Waiting for uvicorn server to start...
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:asgi_wsgi_app:Uvicorn server is running
INFO:asgi_wsgi_app:Uvicorn: INFO:     Will watch for changes in these directories: ['/home/runner/workspace']
INFO:asgi_wsgi_app:Uvicorn: ERROR:    [Errno 98] Address already in use
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/ "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/products "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/dashboard "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/products "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/change-store?tenant=demo1 "HTTP/1.1 303 See Other"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/dashboard?status_message=Store+changed+successfully&status_type=success "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/change-store?tenant=tech "HTTP/1.1 303 See Other"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/dashboard?status_message=Store+changed+successfully&status_type=success "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/api/health "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/admin/products "HTTP/1.1 200 OK"